"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=["Out_of_memory",0],n=["Sys_error",-1],t=["Failure",-2],e=["Invalid_argument",-3],u=["End_of_file",-4],i=["Division_by_zero",-5],o=["Not_found",-6],f=["Match_failure",-7],a=["Stack_overflow",-8],c=["Sys_blocked_io",-9],v=["Assert_failure",-10],s=["Undefined_recursive_module",-11];function g(r,n,t){for(var u=new Array(t),e=0,i=n;e<t;)u[e]=r[i],e=e+1|0,i=i+1|0;return u}function l(r,n){if(n<0||n>=r.length)throw[e,"index out of bounds"];return r[n]}function h(r,n){for(var t=new Array(r),u=0,e=r-1|0;u<=e;++u)t[u]=n;return t}function p(r,n){for(;;){var t=n,u=r,e=u.length,i=0===e?1:e,o=i-t.length|0;if(0==o)return u.apply(null,t);if(!(o<0))return function(n,t){return function(r){return p(n,t.concat([r]))}}(u,t);n=g(t,i,0|-o),r=u.apply(null,g(t,0,i))}}function d(o,f,r){switch(r){case 1:return o(f);case 2:return function(r){return o(f,r)};case 3:return function(r,n){return o(f,r,n)};case 4:return function(r,n,t){return o(f,r,n,t)};case 5:return function(r,n,t,u){return o(f,r,n,t,u)};case 6:return function(r,n,t,u,e){return o(f,r,n,t,u,e)};case 7:return function(r,n,t,u,e,i){return o(f,r,n,t,u,e,i)};default:return p(o,[f])}}function m(r,n){var t=r.length;return 1===t?r(n):d(r,n,t)}function w(i,o,f,r){switch(r){case 1:return p(i(o),[f]);case 2:return i(o,f);case 3:return function(r){return i(o,f,r)};case 4:return function(r,n){return i(o,f,r,n)};case 5:return function(r,n,t){return i(o,f,r,n,t)};case 6:return function(r,n,t,u){return i(o,f,r,n,t,u)};case 7:return function(r,n,t,u,e){return i(o,f,r,n,t,u,e)};default:return p(i,[o,f])}}function b(r,n,t){var u=r.length;return 2===u?r(n,t):w(r,n,t,u)}function y(r,n){return n.tag=r,n}function _(r,n){for(var t=0,u=(0|n.length)-1|0;t<=u;++t)r[t]=n[t];var e=0|n.tag;return 0!=e&&(r.tag=e),0}function x(r,n){return r.tag=n,0}function C(r,n,t,u){if(0<t){for(var e=n,i=(t+n|0)-1|0;e<=i;++e)r[e]=u;return 0}return 0}function E(r){if(r<0)throw[e,"String.create"];for(var n=new Array(r),t=0,u=r-1|0;t<=u;++t)n[t]=0;return n}function S(r,n,t,u,e){if(0<e){if(r===t){var i=r,o=n,f=u,a=e;if(o<f){for(var c=(i.length-f|0)-1|0,v=a-1|0,s=v<c?v:c;0<=s;--s)i[f+s|0]=i[o+s|0];return 0}if(f<o){for(var g=(i.length-o|0)-1|0,l=a-1|0,h=l<g?l:g,p=0;p<=h;++p)i[f+p|0]=i[o+p|0];return 0}return 0}var d=r.length-n|0;if(e<=d){for(var m=0,w=e-1|0;m<=w;++m)t[u+m|0]=r[n+m|0];return 0}for(var b=0,y=d-1|0;b<=y;++b)t[u+b|0]=r[n+b|0];for(var _=d,x=e-1|0;_<=x;++_)t[u+_|0]=0;return 0}return 0}function A(r){var n=r,t=r.length,u="",e=t;if(t<=4096&&t===n.length)return String.fromCharCode.apply(null,n);for(var i=0;0<e;){var o=e<1024?e:1024,f=new Array(o);S(n,i,f,0,o),u+=String.fromCharCode.apply(null,f),e=e-o|0,i=i+o|0}return u}function $(r,n){var t=+r;if(0<r.length&&t==t)return t;if(t=+(r=r.replace(/_/g,"")),0<r.length&&t==t||/^[+-]?nan$/i.test(r))return t;if(/^\+?inf(inity)?$/i.test(r))return 1/0;if(/^-inf(inity)?$/i.test(r))return-1/0;throw n}function R(r){return $(r,[t,"float_of_string"])}function j(r,n){if(n<0||n>=r.length)throw[e,"index out of bounds"];return r.charCodeAt(n)}r.tag=248,n.tag=248,t.tag=248,e.tag=248,u.tag=248,i.tag=248,o.tag=248,f.tag=248,a.tag=248,c.tag=248,v.tag=248,s.tag=248;var B=[0];function I(r){return B[0]+=1,B[0]}function O(r){var n=[r,I(0)];return n.tag=248,n}var P=O("Pervasives.Exit");function T(r,n){var t=E(r);return C(t,0,r,n),t}function k(r,n){return A(T(r,n))}function z(r,n,t){return m(r,m(n,t))}function F(r){return k(1,r)}var G=[];function M(r){if(void 0===r){var n=[G,0];return n.tag=256,n}if(null===r||r[0]!==G)return r;var t=r[1]+1|0,u=[G,t];return u.tag=256,u}function U(r){return null===r?void 0:M(r)}function D(r){if(null===r||r[0]!==G)return r;var n=r[1];return 0===n?void 0:[G,n-1|0]}var L=O("Caml_js_exceptions.Error");function N(r){var n=r.length;return 0===n?[]:g(r,0,n)}function W(r,n){var t=r.length;return 0===t?N(n):0===n.length?g(r,0,t):r.concat(n)}function q(r,n){var t=n.length;if(0===t)return[];for(var u=h(t,m(r,n[0])),e=1,i=t-1|0;e<=i;++e)u[e]=m(r,n[e]);return u}var H=O("Array.Bottom");function J(r){if(void 0!==r)return D(r);throw new Error("getExn")}var K=250,Q=O("CamlinternalLazy.Undefined");function V(r){throw Q}function X(r){var n=r[0];r[0]=V;try{var t=m(n,0);return r[0]=t,x(r,K),t}catch(n){throw r[0]=function(r){throw n},n}}function Y(e){var i=function(r,n){return b(e[5],r,function(r){return m(e[6],m(n,r))})},t=function(r,t,u){return b(e[5],r,function(n){var r=0|t.tag;return i(250==r?t[0]:246==r?X(t):t,function(r){return b(u,n,r)})})},r=function(r,n){return t(r,n,function(r,n){return[r,n]})},n=[i,t,r,function(r){return i(m(e[3],F(r)),function(r){return j(r,0)})}],u=e[5],o=e[4];return[n,u,i,r,o]}function Z(r,n){return[r,n]}function rr(r,n){return[r[0],r[1]+n|0]}function nr(r,n){return[r,n]}function tr(r,n){return[[[r,n]],[]]}var ur=O("Combinators-ReasonSuperTinyCompiler.BasicCombinators.CannotGet"),er=O("Combinators-ReasonSuperTinyCompiler.BasicCombinators.CannotGetError");function ir(r){if(r.tag)throw[ur,r[0]];return r[0][0]}function or(r){if(r.tag)return r[0];throw er}function fr(r,n){switch(0|r.tag){case 0:return m(r[1],n);case 1:var t=m(r[1],n);return t.tag?y(1,[tr(n,r[0])]):t;case 2:return m(r[0],n)}}function ar(r,n){var t=fr(r,Z(n,0));if(t.tag)return y(1,[t[0]]);var u=t[0];return y(0,[[u[0],u[1]]])}function cr(e){return y(2,[function(r){var n,t=r[0];if((n=r[1],t.substr(n)).startsWith(e)){var u=e.length;return y(0,[[e,rr(r,u)]])}return y(1,[tr(r,"Expected: "+e)])}])}function vr(i,o){return y(2,[function(r){var n=fr(i,r);if(n.tag){var t=0|o.tag,u=fr(250==t?o[0]:246==t?X(o):o,r);if(u.tag){var e=u[0];return y(1,[nr(e[0],W([n[0]],e[1]))])}return u}return n}])}function sr(i,o){return y(2,[function(r){var n=fr(i,r);if(n.tag)return y(1,[n[0]]);var t=n[0],u=fr(m(o,t[0]),t[1]);if(u.tag)return y(1,[u[0]]);var e=u[0];return y(0,[[e[0],e[1]]])}])}function gr(n){return y(2,[function(r){return y(0,[[n,r]])}])}function lr(s,g){return y(2,[function(r){for(var n=s,t=g,u=r,e=[];;){var i=e,o=n,f=fr(t,u);if(f.tag)return y(1,[f[0]]);var a=f[0],c=a[1],v=W(i,[a[0]]);if(o<=0)return y(0,[[v,c]]);e=v,u=c,n=o-1|0}}])}function hr(a){return y(2,[function(r){for(var n=a,t=r,u=[];;){var e=u,i=t,o=fr(n,i);if(o.tag)return y(0,[[e,i]]);var f=o[0];u=W(e,[f[0]]),t=f[1]}}])}function pr(i){return y(2,[function(r){var n=fr(hr(i),r);if(n.tag)return n;var t=n[0],u=t[1],e=t[0];return 0===e.length?y(1,[tr(u,"Expected at least one repetition for parser")]):y(0,[[e,u]])}])}function dr(o){return y(2,[function(r){var n=fr(o,r);if(n.tag)return y(1,[n[0]]);var t,u=n[0][1],e=u[1]-r[1]|0,i=r[0];return y(0,[[(t=r[1],function(r){return i.substr(t,r)}(e)),u]])}])}function mr(i){return y(2,[function(r){var n=new RegExp("^"+i),t=r[0].substr(r[1]);if(n.test(t)){var u=q(function(r){return J(null==r?void 0:M(r))},J(U(n.exec(t)))),e=l(u,0).length;return y(0,[[u,[r[0],r[1]+e|0]]])}return y(1,[tr(r,"Expected: "+i)])}])}function wr(g,l){return y(2,[function(r){for(var n=g,t=l,u=r,e=[];;){var i=e,o=u,f=fr(t,o);if(f.tag)return y(0,[[i,o]]);var a=f[0],c=a[1],v=W(i,[a[0]]),s=fr(n,c);if(s.tag)return y(0,[[v,c]]);e=v,u=s[0][1]}}])}function br(r,n){switch(0|n.tag){case 0:return n;case 1:return y(1,[r,n[1]]);case 2:return y(1,[r,n[0]])}}function yr(r,n){switch(0|n.tag){case 0:return y(0,[W([r],n[0]),n[1]]);case 1:return y(0,[[r],n[1]]);case 2:return y(0,[[],n[0]])}}function _r(u){return y(2,[function(r){var n=fr(u,r);if(n.tag)return y(0,[[void 0,r]]);var t=n[0];return y(0,[[M(t[0]),t[1]]])}])}function xr(n){return y(2,[function(r){return y(1,[tr(r,n)])}])}var Cr=[ar,ir,or,cr,vr,sr,gr,lr,hr,pr,dr,mr,wr,br,yr,_r,xr],Er=Y(Cr),Sr=Er[1],Ar=Er[2],$r=Er[4],Rr=br("Expected EOF",b(Ar,dr(mr("$")),function(r){return 0})),jr=b(Ar,dr(mr("[\\s]*")),function(r){return 0});function Br(n){return b(Sr,jr,function(r){return b(Sr,n,function(n){return b(Ar,jr,function(r){return n})})})}var Ir=dr(mr("-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?")),Or=b(Ar,mr('"([^"]*)"'),function(r){return l(r,1)}),Pr=b(Ar,cr("#t"),function(r){return 0}),Tr=b(Ar,cr("#f"),function(r){return 1}),kr=b(Ar,Or,function(r){return y(2,[r])}),zr=b(Ar,Ir,function(r){return y(1,[R(r)])}),Fr=b(Ar,dr(mr("[^()][\\S#]*")),function(r){return y(0,[r])}),Gr=b($r,b($r,b($r,Pr,y(250,[Tr])),y(250,[kr])),y(250,[zr])),Mr=cr("("),Ur=cr(")");function Dr(e){return b(Sr,Mr,function(r){return b(Sr,jr,function(r){return b(Sr,dr(Fr),function(u){return b(Sr,jr,function(r){var n=0|e.tag,t=250==n?e[0]:246==n?X(e):e;return b(Sr,wr(jr,t),function(n){return b(Sr,jr,function(r){return b(Ar,Ur,function(r){return y(4,[u,n])})})})})})})})}function Lr(u){return b(Sr,Mr,function(r){return b(Sr,jr,function(r){var n=0|u.tag,t=250==n?u[0]:246==n?X(u):u;return b(Sr,wr(jr,t),function(n){return b(Sr,jr,function(r){return b(Ar,Ur,function(r){return y(3,[n])})})})})})}var Nr=[];_(Nr,y(246,[function(r){return b($r,b($r,Gr,y(246,[function(r){return Dr(Nr)}])),y(246,[function(r){return Lr(Nr)}]))}]));var Wr=0|Nr.tag,qr=b(Sr,Br(250===Wr?Nr[0]:246===Wr?X(Nr):Nr),function(n){return b(Ar,Rr,function(r){return n})});function Hr(r){if("number"==typeof r)return 0===r?"#t":"#f";switch(0|r.tag){case 0:return r[0];case 1:return r[0].toString();case 2:return'"'+r[0]+'"';case 3:return"("+r[0].map(Hr).join(" ")+")";case 4:return"("+r[0]+" "+r[1].map(Hr).join(" ")+")"}}var Jr=O("Scheme_Interpreter-ReasonSuperTinyCompiler.RuntimeError");function Kr(r,n){var t=0;if(2!==n.length)t=1;else{var u=n[0],e=0;if("number"!=typeof u&&1===u.tag){var i=n[1];if("number"==typeof i)throw[Jr,Hr(i)+" must be a number"];if(1===i.tag)return y(1,[b(r,u[0],i[0])]);throw[Jr,Hr(i)+" must be a number"]}if((e=2)===e){var o=n[1];if("number"!=typeof o&&1===o.tag)throw[Jr,Hr(u)+" must be a number"];t=1}}if(1===t)throw[Jr,Hr(y(3,[n]))+" must be binary number list"]}function Qr(r,n){var t=0;if(3!==n.length)t=1;else{var u=n[0];if("number"==typeof u)return m(r,0!==u?n[2]:n[1]);t=1}if(1===t)throw[Jr,Hr(y(3,[n]))+" must be"]}function Vr(r){if("number"==typeof r||4!==r.tag)return r;var n=r[1],t=r[0];switch(t){case"+":return Kr(function(r,n){return r+n},n);case"-":return Kr(function(r,n){return r-n},n);case"if":return Qr(Vr,n);default:throw[Jr,t+" is not valid procedure"]}}function Xr(r){return ar(qr,r)}function Yr(r){return z(function(r){return z(Vr,ir,r)},Xr,r)}var Zr=0,rn=0,nn=Hr;exports.$$eval=Yr,exports.Interpreter=rn,exports.Parser=Zr,exports.parse=Xr,exports.show=nn;
